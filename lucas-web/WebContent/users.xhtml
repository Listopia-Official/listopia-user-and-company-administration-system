<ui:composition template="/WEB-INF/web/template/dataTemplate.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
	<ui:param name="pageTitle"
		value="#{msg['lucas.application.userScreen.title']}" />
	<ui:param name="sitePrefix" value="user" />
	<ui:param name="searchBean" value="#{userBean}" />
	<ui:param name="searchFunction" value="searchUsers" />
	<ui:param name="refreshFunction" value="refreshUsers" />
	<ui:param name="searchResults" value="#{userBean.searchUserResults}" />
	<ui:param name="selectedResults" value="#{userBean.selectedUsers}" />
	<ui:param name="findDynamicPermission" value="USER_FIND_DYNAMIC" />
	<ui:define name="dialogs">
		<ui:include src="/WEB-INF/web/users/createPupilDialog.xhtml" />
		<ui:include src="/WEB-INF/web/users/createTeacherDialog.xhtml" />
		<ui:include src="/WEB-INF/web/users/createGuestDialog.xhtml" />
		<ui:include src="/WEB-INF/web/users/editUserDialog.xhtml" />
		<ui:include src="/WEB-INF/web/users/imageManagerDialog.xhtml" />
		<ui:include src="/WEB-INF/web/users/userCardManagerDialog.xhtml" />
	</ui:define>
	<ui:define name="otherContent">
		<p:importConstants type="florian_haas.lucas.model.EnumSchoolClass" />
		<p:importEnum type="florian_haas.lucas.model.EnumUserType" />
		<p:importConstants
			type="florian_haas.lucas.web.util.converter.RanksConverter" />
		<p:importConstants
			type="florian_haas.lucas.web.util.converter.NullConverter" />
		<p:importConstants
			type="florian_haas.lucas.web.util.converter.NullConverterNoText" />
		<p:importConstants
			type="florian_haas.lucas.web.util.converter.EnumConverter" />
	</ui:define>
	<ui:define name="buttonArea">
		<p:toolbarGroup>
			<ui:fragment
				rendered="#{loginBean.hasPermissionsOr([EnumPermission.USER_CREATE_PUPIL,EnumPermission.USER_CREATE_TEACHER,EnumPermission.USER_CREATE_GUEST])}">
				<p:splitButton icon="fa fa-user-plus"
					value="#{msg['lucas.application.userScreen.createUserButton.name']}"
					title="#{msg['lucas.application.userScreen.createUserButton.tooltip']}"
					update="createPupilDialogForm" process="@this"
					oncomplete="PF('createPupilDialog').show()"
					actionListener="#{userBean.resetCreatePupilDialog}"
					onstart="return #{loginBean.hasPermission(EnumPermission.USER_CREATE_PUPIL)}">
					<p:resetInput target="createPupilDialogForm" clearModel="true" />
					<p:menuitem icon="fa fa-user"
						rendered="#{loginBean.hasPermission(EnumPermission.USER_CREATE_PUPIL)}"
						value="#{msg['lucas.application.userScreen.newPupilButton.name']}"
						update="createPupilDialogForm" process="@this"
						actionListener="#{userBean.resetCreatePupilDialog}"
						title="#{msg['lucas.application.userScreen.newPupilButton.tooltip']}"
						oncomplete="PF('createPupilDialog').show()">
						<p:resetInput target="createPupilDialogForm" clearModel="true" />
					</p:menuitem>
					<p:menuitem icon="fa fa-user-md"
						rendered="#{loginBean.hasPermission(EnumPermission.USER_CREATE_TEACHER)}"
						value="#{msg['lucas.application.userScreen.newTeacherButton.name']}"
						update="createTeacherDialogForm" process="@this"
						actionListener="#{userBean.resetCreateTeacherDialog}"
						title="#{msg['lucas.application.userScreen.newTeacherButton.tooltip']}"
						oncomplete="PF('createTeacherDialog').show()">
						<p:resetInput target="createTeacherDialogForm" clearModel="true" />
					</p:menuitem>
					<p:menuitem icon="fa fa-group"
						rendered="#{loginBean.hasPermission(EnumPermission.USER_CREATE_GUEST)}"
						value="#{msg['lucas.application.userScreen.newGuestButton.name']}"
						update="createGuestDialogForm" process="@this"
						title="#{msg['lucas.application.userScreen.newGuestButton.tooltip']}"
						oncomplete="PF('createGuestDialog').show()">
						<p:resetInput target="createGuestDialogForm" clearModel="true" />
					</p:menuitem>
					<p:separator
						rendered="#{(loginBean.hasPermission(EnumPermission.USER_CREATE_PUPIL) &amp;&amp; loginBean.hasPermission(EnumPermission.USER_IMPORT_PUPILS))||(loginBean.hasPermission(EnumPermission.USER_CREATE_TEACHER) &amp;&amp; loginBean.hasPermission(EnumPermission.USER_IMPORT_TEACHERS))}" />
					<p:menuitem disabled="true"
						rendered="#{loginBean.hasPermissionsAnd([EnumPermission.USER_IMPORT_PUPILS,EnumPermission.USER_CREATE_PUPIL])}"
						value="#{msg['lucas.application.userScreen.importPupilsButton.name']}"
						icon="fa fa-file-excel-o"
						title="#{msg['lucas.application.userScreen.importPupilsButton.tooltip']}" />
					<p:menuitem disabled="true"
						rendered="#{loginBean.hasPermissionsAnd([EnumPermission.USER_IMPORT_TEACHERS,EnumPermission.USER_CREATE_TEACHER])}"
						value="#{msg['lucas.application.userScreen.importTeachersButton.name']}"
						icon="fa fa-file-excel-o"
						title="#{msg['lucas.application.userScreen.importTeachersButton.tooltip']}" />
				</p:splitButton>
				<ui:include src="/WEB-INF/web/components/toolbarSeparator.xhtml" />
			</ui:fragment>
			<p:commandButton
				rendered="#{loginBean.hasPermissionsOr([EnumPermission.USER_SET_FORENAME,EnumPermission.USER_SET_SURNAME,EnumPermission.USER_SET_SCHOOL_CLASS,EnumPermission.USER_ADD_RANK,EnumPermission.USER_REMOVE_RANK])}"
				value="#{msg['lucas.application.userScreen.editUserButton.name']}"
				title="#{msg['lucas.application.userScreen.editUserButton.tooltip']}"
				update="editUserDialog" process="@this"
				action="#{userBean.initEditUserDialog}"
				oncomplete="PF('editUserDialog').show()" icon="fa fa-edit"
				disabled="#{userBean.selectedUsers.size() != 1}" />
			<p:commandButton
				rendered="#{loginBean.hasPermissionsOr([EnumPermission.USER_SET_IMAGE,EnumPermission.USER_GET_IMAGE_FROM_ID])}"
				value="#{msg['lucas.application.userScreen.imageManagerButton.name']}"
				title="#{msg['lucas.application.userScreen.imageManagerButton.tooltip']}"
				update="imageManagerDialogForm" process="@this"
				action="#{userBean.initImageManagerDialog}"
				oncomplete="PF('imageManagerDialog').show()" icon="fa fa-image"
				disabled="#{userBean.selectedUsers.size() != 1}" />
			<p:commandButton
				rendered="#{loginBean.hasPermissionsOr([EnumPermission.USER_ADD_USER_CARD,EnumPermission.USER_REMOVE_USER_CARD,EnumPermission.USER_BLOCK_USER_CARD,EnumPermission.USER_UNBLOCK_USER_CARD,EnumPermission.USER_SET_VALID_DATE_USER_CARD]) &amp;&amp; loginBean.hasPermissionsAnd([EnumPermission.USER_FIND_USER_CARD_BY_ID,EnumPermission.USER_GET_USER_CARDS])}"
				value="#{msg['lucas.application.userScreen.userCardManagerButton.name']}"
				title="#{msg['lucas.application.userScreen.userCardManagerButton.tooltip']}"
				update="userCardManagerDialogForm" process="@this"
				action="#{userBean.initUserCardManagerDialog}"
				oncomplete="PF('userCardManagerDialog').show()"
				icon="fa fa-credit-card"
				disabled="#{userBean.selectedUsers.size() != 1}" />
			<ui:include src="/WEB-INF/web/components/toolbarSeparator.xhtml" />
			<p:commandButton
				value="#{msg['lucas.application.userScreen.profileButton.name']}"
				title="#{msg['lucas.application.userScreen.profileButton.tooltip']}"
				icon="fa fa-info-circle"
				disabled="#{userBean.selectedUsers.size() != 1 || true}" />
			<ui:include src="/WEB-INF/web/components/toolbarSeparator.xhtml" />
			<p:commandButton icon="fa fa-user-times"
				value="#{msg['lucas.application.userScreen.removeUserButton.name']}"
				title="#{msg['lucas.application.userScreen.removeUserButton.tooltip']}"
				disabled="#{userBean.selectedUsers.size() &lt;= 0 || true}" />
		</p:toolbarGroup>
	</ui:define>
	<ui:define name="searchCriteria">
		<p:row>
			<p:column>
				<p:selectBooleanCheckbox id="searchUserIdSelectBooleanCheckbox"
					styleClass="checkbox" value="#{userBean.useSearchUserId}"
					title="#{msg['lucas.application.userScreen.searchUserIdSelectBooleanCheckbox.tooltip']}">
					<p:ajax event="change"
						update="userSearchCriteriaForm:searchUserIdInputNumber userSearchCriteriaForm:searchUserIdComparator"
						process="@this" />
				</p:selectBooleanCheckbox>
				<p:outputLabel for="searchUserIdSelectBooleanCheckbox"
					value="#{msg['lucas.application.userScreen.searchUserIdSelectBooleanCheckbox.name']}"
					title="#{msg['lucas.application.userScreen.searchUserIdSelectBooleanCheckbox.tooltip']}" />
			</p:column>
			<p:column>
				<p:selectBooleanCheckbox
					id="searchUserForenameSelectBooleanCheckbox" styleClass="checkbox"
					value="#{userBean.useSearchUserForename}"
					title="#{msg['lucas.application.userScreen.searchUserForenameSelectBooleanCheckbox.tooltip']}">
					<p:ajax event="change"
						update="userSearchCriteriaForm:searchUserForenameInputText userSearchCriteriaForm:searchUserForenameComparator"
						process="@this" />
				</p:selectBooleanCheckbox>
				<p:outputLabel for="searchUserForenameSelectBooleanCheckbox"
					value="#{msg['lucas.application.userScreen.searchUserForenameSelectBooleanCheckbox.name']}"
					title="#{msg['lucas.application.userScreen.searchUserForenameSelectBooleanCheckbox.tooltip']}" />
			</p:column>
			<p:column>
				<p:selectBooleanCheckbox id="searchUserSurnameSelectBooleanCheckbox"
					styleClass="checkbox" value="#{userBean.useSearchUserSurname}"
					title="#{msg['lucas.application.userScreen.searchUserSurnameSelectBooleanCheckbox.tooltip']}">
					<p:ajax event="change"
						update="userSearchCriteriaForm:searchUserSurnameInputText userSearchCriteriaForm:searchUserSurnameComparator"
						process="@this" />
				</p:selectBooleanCheckbox>
				<p:outputLabel for="searchUserSurnameSelectBooleanCheckbox"
					value="#{msg['lucas.application.userScreen.searchUserSurnameSelectBooleanCheckbox.name']}"
					title="#{msg['lucas.application.userScreen.searchUserSurnameSelectBooleanCheckbox.tooltip']}" />
			</p:column>
			<p:column>
				<p:selectBooleanCheckbox id="searchUserTypeSelectBooleanCheckbox"
					styleClass="checkbox" value="#{userBean.useSearchUserType}"
					title="#{msg['lucas.application.userScreen.searchUserTypeSelectBooleanCheckbox.tooltip']}">
					<p:ajax event="change"
						update="userSearchCriteriaForm:searchUserTypeSelectOneMenu userSearchCriteriaForm:searchUserTypeComparator"
						process="@this" />
				</p:selectBooleanCheckbox>
				<p:outputLabel for="searchUserTypeSelectBooleanCheckbox"
					value="#{msg['lucas.application.userScreen.searchUserTypeSelectBooleanCheckbox.name']}"
					title="#{msg['lucas.application.userScreen.searchUserTypeSelectBooleanCheckbox.tooltip']}" />
			</p:column>
			<p:column>
				<p:selectBooleanCheckbox
					id="searchUserSchoolGradeSelectBooleanCheckbox"
					styleClass="checkbox" value="#{userBean.useSearchUserSchoolGrade}"
					title="#{msg['lucas.application.userScreen.searchUserSchoolGradeSelectBooleanCheckbox.tooltip']}">
					<p:ajax event="change"
						update="userSearchCriteriaForm:searchUserSchoolGradeSelectOneMenu userSearchCriteriaForm:searchUserSchoolGradeComparator"
						process="@this" />
				</p:selectBooleanCheckbox>
				<p:outputLabel for="searchUserSchoolGradeSelectBooleanCheckbox"
					value="#{msg['lucas.application.userScreen.searchUserSchoolGradeSelectBooleanCheckbox.name']}"
					title="#{msg['lucas.application.userScreen.searchUserSchoolGradeSelectBooleanCheckbox.tooltip']}" />
			</p:column>
			<p:column>
				<p:selectBooleanCheckbox
					id="searchUserSchoolClassSelectBooleanCheckbox"
					styleClass="checkbox" value="#{userBean.useSearchUserSchoolClass}"
					title="#{msg['lucas.application.userScreen.searchUserSchoolClassSelectBooleanCheckbox.tooltip']}">
					<p:ajax event="change"
						update="userSearchCriteriaForm:searchUserSchoolClassSelectOneMenu userSearchCriteriaForm:searchUserSchoolClassComparator"
						process="@this" />
				</p:selectBooleanCheckbox>
				<p:outputLabel for="searchUserSchoolClassSelectBooleanCheckbox"
					value="#{msg['lucas.application.userScreen.searchUserSchoolClassSelectBooleanCheckbox.name']}"
					title="#{msg['lucas.application.userScreen.searchUserSchoolClassSelectBooleanCheckbox.tooltip']}" />
			</p:column>
			<p:column>
				<p:selectBooleanCheckbox id="searchUserRanksSelectBooleanCheckbox"
					styleClass="checkbox" value="#{userBean.useSearchUserRanks}"
					title="#{msg['lucas.application.userScreen.searchUserRanksSelectBooleanCheckbox.tooltip']}">
					<p:ajax event="change"
						update="userSearchCriteriaForm:searchUserRanksComparator userSearchCriteriaForm:searchUserRanksChips"
						process="@this" />
				</p:selectBooleanCheckbox>
				<p:outputLabel for="searchUserRanksSelectBooleanCheckbox"
					value="#{msg['lucas.application.userScreen.searchUserRanksSelectBooleanCheckbox.name']}"
					title="#{msg['lucas.application.userScreen.searchUserRanksSelectBooleanCheckbox.tooltip']}" />
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<p:selectOneMenu id="searchUserIdComparator"
					disabled="#{not userBean.useSearchUserId}"
					value="#{userBean.searchUserIdComparator}"
					title="#{msg['lucas.application.userScreen.searchUserIdComparator.tooltip']}">
					<f:selectItems value="#{EnumQueryComparator.NUMERIC_COMPARATORS}"
						var="comparator" itemValue="#{comparator}"
						itemLabel="#{converterBean.convertEnum(comparator)}" />
				</p:selectOneMenu>
			</p:column>
			<p:column>
				<p:selectOneMenu id="searchUserForenameComparator"
					disabled="#{not userBean.useSearchUserForename}"
					title="#{msg['lucas.application.userScreen.searchUserForenameComparator.tooltip']}"
					value="#{userBean.searchUserForenameComparator}">
					<f:selectItems value="#{EnumQueryComparator.TEXT_COMPARATORS}"
						var="comparator" itemValue="#{comparator}"
						itemLabel="#{converterBean.convertEnum(comparator)}" />
				</p:selectOneMenu>
			</p:column>
			<p:column>
				<p:selectOneMenu id="searchUserSurnameComparator"
					disabled="#{not userBean.useSearchUserSurname}"
					title="#{msg['lucas.application.userScreen.searchUserSurnameComparator.tooltip']}"
					value="#{userBean.searchUserSurnameComparator}">
					<f:selectItems value="#{EnumQueryComparator.TEXT_COMPARATORS}"
						var="comparator" itemValue="#{comparator}"
						itemLabel="#{converterBean.convertEnum(comparator)}" />
				</p:selectOneMenu>
			</p:column>
			<p:column>
				<p:selectOneMenu id="searchUserTypeComparator"
					disabled="#{not userBean.useSearchUserType}"
					title="#{msg['lucas.application.userScreen.searchUserTypeComparator.tooltip']}"
					value="#{userBean.searchUserTypeComparator}">
					<f:selectItems value="#{EnumQueryComparator.LOGIC_COMPARATORS}"
						var="comparator" itemValue="#{comparator}"
						itemLabel="#{converterBean.convertEnum(comparator)}" />
				</p:selectOneMenu>
			</p:column>
			<p:column>
				<p:selectOneMenu id="searchUserSchoolGradeComparator"
					disabled="#{not userBean.useSearchUserSchoolGrade}"
					title="#{msg['lucas.application.userScreen.searchUserSchoolGradeComparator.tooltip']}"
					value="#{userBean.searchUserSchoolGradeComparator}">
					<f:selectItems value="#{EnumQueryComparator.NUMERIC_COMPARATORS}"
						var="comparator" itemValue="#{comparator}"
						itemLabel="#{converterBean.convertEnum(comparator)}" />
				</p:selectOneMenu>
			</p:column>
			<p:column>
				<p:selectOneMenu id="searchUserSchoolClassComparator"
					disabled="#{not userBean.useSearchUserSchoolClass}"
					title="#{msg['lucas.application.userScreen.searchUserSchoolClassComparator.tooltip']}"
					value="#{userBean.searchUserSchoolClassComparator}">
					<f:selectItems value="#{EnumQueryComparator.NUMERIC_COMPARATORS}"
						var="comparator" itemValue="#{comparator}"
						itemLabel="#{converterBean.convertEnum(comparator)}" />
				</p:selectOneMenu>
			</p:column>
			<p:column>
				<p:selectOneMenu id="searchUserRanksComparator"
					disabled="#{not userBean.useSearchUserRanks}"
					title="#{msg['lucas.application.userScreen.searchUserRanksComparator.tooltip']}"
					value="#{userBean.searchUserRanksComparator}">
					<f:selectItems value="#{EnumQueryComparator.ARRAY_COMPARATORS}"
						var="comparator" itemValue="#{comparator}"
						itemLabel="#{converterBean.convertEnum(comparator)}" />
				</p:selectOneMenu>
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<p:inputNumber value="#{userBean.searchUserId}" minValue="0"
					decimalPlaces="0" id="searchUserIdInputNumber"
					disabled="#{not userBean.useSearchUserId}" />
			</p:column>
			<p:column>
				<p:inputText value="#{userBean.searchUserForename}"
					id="searchUserForenameInputText"
					disabled="#{not userBean.useSearchUserForename}"
					converter="#{converterBean.getConverter(NullConverterNoText.CONVERTER_ID)}" />
			</p:column>
			<p:column>
				<p:inputText value="#{userBean.searchUserSurname}"
					id="searchUserSurnameInputText"
					disabled="#{not userBean.useSearchUserSurname}"
					converter="#{converterBean.getConverter(NullConverterNoText.CONVERTER_ID)}" />
			</p:column>
			<p:column>
				<p:selectOneMenu value="#{userBean.searchUserType}"
					id="searchUserTypeSelectOneMenu"
					disabled="#{not userBean.useSearchUserType}">
					<f:selectItems value="#{EnumUserType.ALL_VALUES}" var="userType"
						itemValue="#{userType}"
						itemLabel="#{converterBean.convertEnum(userType)}" />
				</p:selectOneMenu>
			</p:column>
			<p:column>
				<p:selectOneMenu value="#{userBean.searchUserSchoolGrade}"
					id="searchUserSchoolGradeSelectOneMenu"
					disabled="#{not userBean.useSearchUserSchoolGrade}">
					<f:selectItems value="#{EnumSchoolClass.GRADES}" />
				</p:selectOneMenu>
			</p:column>
			<p:column>
				<p:selectOneMenu value="#{userBean.searchUserSchoolClass}"
					id="searchUserSchoolClassSelectOneMenu"
					disabled="#{not userBean.useSearchUserSchoolClass}">
					<f:selectItems value="#{EnumSchoolClass.CLASSES}" />
				</p:selectOneMenu>
			</p:column>
			<p:column>
				<p:chips id="searchUserRanksChips"
					value="#{userBean.searchUserRanks}"
					disabled="#{not userBean.useSearchUserRanks}" />
			</p:column>
		</p:row>
	</ui:define>
	<ui:define name="searchResults">
		<p:column
			headerText="#{msg['lucas.application.userScreen.userSearchResultsTable.idColumn.name']}"
			sortBy="#{entity.id}"
			visible="#{userBean.resultsDatatableColumns[0]}">
			<h:outputText value="#{entity.id}" />
		</p:column>
		<p:column
			headerText="#{msg['lucas.application.userScreen.userSearchResultsTable.forenameColumn.name']}"
			sortBy="#{entity.forename}"
			visible="#{userBean.resultsDatatableColumns[1]}">
			<h:outputText value="#{entity.forename}"
				converter="#{converterBean.getConverter(NullConverter.CONVERTER_ID)}" />
		</p:column>
		<p:column
			headerText="#{msg['lucas.application.userScreen.userSearchResultsTable.surnameColumn.name']}"
			sortBy="#{entity.surname}"
			visible="#{userBean.resultsDatatableColumns[2]}">
			<h:outputText value="#{entity.surname}"
				converter="#{converterBean.getConverter(NullConverter.CONVERTER_ID)}" />
		</p:column>
		<p:column
			headerText="#{msg['lucas.application.userScreen.userSearchResultsTable.userTypeColumn.name']}"
			sortBy="#{entity.userType}"
			visible="#{userBean.resultsDatatableColumns[3]}">
			<h:outputText value="#{entity.userType}"
				converter="#{converterBean.getConverter(EnumConverter.CONVERTER_ID)}" />
		</p:column>
		<p:column
			headerText="#{msg['lucas.application.userScreen.userSearchResultsTable.schoolClassColumn.name']}"
			sortBy="#{entity.schoolClass}"
			visible="#{userBean.resultsDatatableColumns[4]}">
			<h:outputText value="#{entity.schoolClass}"
				converter="#{converterBean.getConverter(EnumConverter.CONVERTER_ID)}" />
		</p:column>
		<p:column
			headerText="#{msg['lucas.application.userScreen.userSearchResultsTable.ranksColumn.name']}"
			visible="#{userBean.resultsDatatableColumns[5]}">
			<h:outputText value="#{entity.ranks}"
				converter="#{converterBean.getConverter(RanksConverter.CONVERTER_ID)}"
				escape="false" />
		</p:column>
	</ui:define>
</ui:composition>